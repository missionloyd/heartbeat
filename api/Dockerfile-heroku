# Use the latest Node.js image
FROM node:latest

# Set the working directory in the container
WORKDIR /usr/src/app

# Create an additional 'app' directory to match the expected structure
WORKDIR /usr/src/app/app

# Copy all project files into the newly created 'app' directory
COPY . .

# Go back to the parent directory to handle npm installation
WORKDIR /usr/src/app

# Install dependencies, avoiding npm progress log for clearer output
RUN npm install --no-progress

# Define the command to run your app, using the correct directory
CMD ["npm", "start"]